"use strict";class PassPhraseJS{constructor(words,options){this.minLength=10,this.minWords=2,this.maxWords=4,this.words=words||[],this.setOptions(options),this.init()}init(){document.addEventListener("click",this.handleClick.bind(this)),this.each(this.$$("[passphrasejs]"),el=>{el.innerText=this.passphrase()});let info=this.$("[passphrasejs-info]");info&&(info.innerText=this.info().join("\n"))}$(selector){return document.querySelector(selector)}$$(selector){return document.querySelectorAll(selector)}copyTo(el){if(!el)return;let selector=el.getAttribute("passphrasejs-copyto"),val=el.innerText;this.each(this.$$(selector),input=>{input.value=val})}each(array,callback){for(var i=0;i<array.length;i++)callback(array[i])}handleClick(e){let el=e.target;this.copyTo(el.closest("[passphrasejs-copyto")),this.renew(el.closest("[passphrasejs-renew"))}info(){let info=["Words in the dictionary: "+this.words.length,"["+this.words.join(", ")+"]","","--- Settings for random passphrase"],props=["minLength","minWords","maxWords"];for(var i=0;i<props.length;i++){let prop=props[i];info.push(prop+": "+this[prop])}return info.push(""),info.push("--- Possible Passwords (minLength ignored)"),info.push(this.possible({words:this.words.length,minWords:this.minWords,maxWords:this.maxWords})),info}passphrase(){let numwords=this.rand(this.minWords,this.maxWords),words=[];for(var i=0;i<numwords;i++)words.push(this.randomWord(words));let phrase=words.join("-");return phrase.length<this.minLength?this.passphrase():phrase}possible(settings){if(settings.words<1)return"-- INVALID --";let numWords=settings.maxWords-settings.minWords+1,approx=Math.pow(settings.words,numWords);return approx<settings.words?"-- INVALID --":approx}rand(min,max){return Math.floor(Math.random()*(max-min+1)+min)}randomWord(exclude){let key=Math.floor(Math.random()*this.words.length),word=this.words[key];return exclude.includes(word)?this.randomWord(exclude):word}renew(el){if(!el)return;let selector=el.getAttribute("passphrasejs-renew"),target=this.$(selector);target&&(target.innerText=this.passphrase())}setOptions(options,logInfo){for(var prop in options=options||{}){let val=options[prop];console.log("set option",prop,val)}logInfo&&console.log(this.info())}}